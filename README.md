# otopark-doluluk-analizi
[goruntuisleme.ipynb](https://github.com/user-attachments/files/24319775/goruntuisleme.ipynb)
{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "8aa4384f-7b97-47ae-8bd4-3b2c01f7d294",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "======================================================================\n",
      "               OTOPARK DOLULUK ANALİZ SİSTEMİ\n",
      "                  SÜRÜKLE-BIRAK SİSTEMİ\n",
      "======================================================================\n",
      "\n",
      "ÖZELLİKLER:\n",
      "  ✓ SÜRÜKLE-BIRAK ile park yeri seçimi\n",
      "  ✓ Her alan için ÖZEL BOYUT belirleme\n",
      "  ✓ Küçük/büyük tüm park yerlerine uyumlu\n",
      "  ✓ Adaptif doluluk tespiti\n",
      "  ✓ Kompakt görsel raporlama\n",
      "======================================================================\n",
      "\n",
      "\n",
      "======================================================================\n",
      "DİNAMİK PARK YERİ SEÇIM MODU - SÜRÜKLE-BIRAK\n",
      "======================================================================\n",
      "KONTROLLER:\n",
      "  [Sol Tık + Sürükle]: Park yerini istediğiniz boyutta çizin\n",
      "  [Sağ Tık]: Son eklenen park yerini sil\n",
      "  [R] Tuşu: Tüm seçimleri sıfırla\n",
      "  [Q] Tuşu: Bitir ve kaydet\n",
      "======================================================================\n",
      "\n",
      "ÖNEMLİ: Her park yeri için sol üst köşeden sağ alt köşeye doğru\n",
      "        fareyi sürükleyerek tam alanı kaplayacak şekilde çizin!\n",
      "\n",
      "✓ Park yeri eklendi: #1 - Konum:(395,90) Boyut:[58x25]\n",
      "⚠ Alan çok küçük! En az 10x10 piksel olmalı.\n",
      "✓ Park yeri eklendi: #2 - Konum:(548,88) Boyut:[64x30]\n",
      "✓ Park yeri eklendi: #3 - Konum:(619,159) Boyut:[66x27]\n",
      "✓ Park yeri eklendi: #4 - Konum:(158,88) Boyut:[58x32]\n",
      "✓ Park yeri eklendi: #5 - Konum:(89,230) Boyut:[60x27]\n",
      "\n",
      "======================================================================\n",
      "KAYIT BAŞARILI!\n",
      "======================================================================\n",
      "✓ Toplam 5 park yeri kaydedildi\n",
      "\n",
      "Boyut İstatistikleri:\n",
      "  • Genişlik: Min=58px, Max=66px, Ortalama=61px\n",
      "  • Yükseklik: Min=25px, Max=32px, Ortalama=28px\n",
      "  • Alan: Min=1450px², Max=1920px², Ortalama=1725px²\n",
      "======================================================================\n",
      "\n",
      "\n",
      "======================================================================\n",
      "ANALİZ YAPILIYOR...\n",
      "======================================================================\n",
      "\n",
      "======================================================================\n",
      "DETAYLI SONUÇLAR\n",
      "======================================================================\n",
      "Toplam Park Yeri    : 5\n",
      "Boş Park Yerleri    : 4 (%80.0)\n",
      "Dolu Park Yerleri   : 1 (%20.0)\n",
      "----------------------------------------------------------------------\n",
      "Doluluk Oranı       : %20.0\n",
      "======================================================================\n",
      "\n",
      "[ESC] veya herhangi bir tuşa basarak pencereyi kapatabilirsiniz...\n",
      "\n",
      "Program başarıyla tamamlandı!\n",
      "\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "'\\n# Eğer park yerleri daha önce kaydedilmişse, doğrudan yükleyip analiz yapabilirsiniz:\\n\\nimport pickle\\nimport cv2\\n\\n# Park yerlerini yükle\\nwith open(\\'parking_spots.pkl\\', \\'rb\\') as f:\\n    parking_spots = pickle.load(f)\\n\\n# Analiz yap\\nimg_path = \"otopark.jpg\"\\nresult_img, empty, occupied = analyze_parking(img_path, parking_spots)\\n\\n# Göster\\ncv2.imshow(\"Analiz\", result_img)\\ncv2.waitKey(0)\\ncv2.destroyAllWindows()\\n'"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import cv2\n",
    "import numpy as np\n",
    "import pickle\n",
    "\n",
    "def select_parking_spots(img_path):\n",
    "    \n",
    "    # ADIM 1: Değişkenleri başlat\n",
    "    parking_spots = []\n",
    "    \n",
    "    # Sürükleme için değişkenler\n",
    "    drawing = False  # Çizim aktif mi?\n",
    "    start_point = None  # Başlangıç noktası\n",
    "    end_point = None  # Bitiş noktası\n",
    "    \n",
    "    # ADIM 2: Görüntüyü yükle\n",
    "    img = cv2.imread(img_path)\n",
    "    if img is None:\n",
    "        print(f\"HATA: '{img_path}' dosyası bulunamadı!\")\n",
    "        return []\n",
    "    \n",
    "    # ADIM 3: Fare callback fonksiyonu - SÜRÜKLE-BIRAK\n",
    "    def mouse_callback(event, x, y, flags, param):\n",
    "        nonlocal parking_spots, drawing, start_point, end_point\n",
    "        \n",
    "        # SOL FARE BUTONU BASILDI - Çizime başla\n",
    "        if event == cv2.EVENT_LBUTTONDOWN:\n",
    "            drawing = True\n",
    "            start_point = (x, y)\n",
    "            end_point = (x, y)\n",
    "            \n",
    "        # FARE HAREKET EDİYOR - Canlı önizleme\n",
    "        elif event == cv2.EVENT_MOUSEMOVE:\n",
    "            if drawing:\n",
    "                end_point = (x, y)\n",
    "                \n",
    "        # SOL FARE BUTONU BIRAKILDI - Park yerini kaydet\n",
    "        elif event == cv2.EVENT_LBUTTONUP:\n",
    "            if drawing:\n",
    "                drawing = False\n",
    "                end_point = (x, y)\n",
    "                \n",
    "                # Dikdörtgenin koordinatlarını hesapla\n",
    "                x1, y1 = start_point\n",
    "                x2, y2 = end_point\n",
    "                \n",
    "                # Sol üst ve sağ alt köşeleri bul\n",
    "                top_left_x = min(x1, x2)\n",
    "                top_left_y = min(y1, y2)\n",
    "                width = abs(x2 - x1)\n",
    "                height = abs(y2 - y1)\n",
    "                \n",
    "                # Minimum boyut kontrolü (çok küçük alanları engelle)\n",
    "                if width > 10 and height > 10:\n",
    "                    parking_spots.append((top_left_x, top_left_y, width, height))\n",
    "                    print(f\"✓ Park yeri eklendi: #{len(parking_spots)} - Konum:({top_left_x},{top_left_y}) Boyut:[{width}x{height}]\")\n",
    "                else:\n",
    "                    print(\"⚠ Alan çok küçük! En az 10x10 piksel olmalı.\")\n",
    "                \n",
    "                # Sıfırla\n",
    "                start_point = None\n",
    "                end_point = None\n",
    "        \n",
    "        # SAĞ TIK - Son park yerini sil\n",
    "        elif event == cv2.EVENT_RBUTTONDOWN:\n",
    "            if parking_spots:\n",
    "                removed = parking_spots.pop()\n",
    "                print(f\"✗ Park yeri silindi. Kalan: {len(parking_spots)}\")\n",
    "    \n",
    "    # ADIM 4: Pencere oluştur ve callback bağla\n",
    "    cv2.namedWindow(\"Park Yeri Secimi - Surukle-Birak\", cv2.WINDOW_NORMAL)\n",
    "    cv2.setMouseCallback(\"Park Yeri Secimi - Surukle-Birak\", mouse_callback)\n",
    "    \n",
    "    print(\"\\n\" + \"=\"*70)\n",
    "    print(\"DİNAMİK PARK YERİ SEÇIM MODU - SÜRÜKLE-BIRAK\")\n",
    "    print(\"=\"*70)\n",
    "    print(\"KONTROLLER:\")\n",
    "    print(\"  [Sol Tık + Sürükle]: Park yerini istediğiniz boyutta çizin\")\n",
    "    print(\"  [Sağ Tık]: Son eklenen park yerini sil\")\n",
    "    print(\"  [R] Tuşu: Tüm seçimleri sıfırla\")\n",
    "    print(\"  [Q] Tuşu: Bitir ve kaydet\")\n",
    "    print(\"=\"*70)\n",
    "    print(\"\\nÖNEMLİ: Her park yeri için sol üst köşeden sağ alt köşeye doğru\")\n",
    "    print(\"        fareyi sürükleyerek tam alanı kaplayacak şekilde çizin!\\n\")\n",
    "    \n",
    "    # ADIM 5: Ana döngü\n",
    "    while True:\n",
    "        img_copy = img.copy()\n",
    "        \n",
    "        # ADIM 6: Tüm kaydedilmiş park yerlerini çiz\n",
    "        for i, (x, y, w, h) in enumerate(parking_spots):\n",
    "            # Yeşil renkle dikdörtgen çiz\n",
    "            cv2.rectangle(img_copy, (x, y), (x + w, y + h), (0, 255, 0), 2)\n",
    "            \n",
    "            # Park yeri numarasını yaz\n",
    "            cv2.putText(img_copy, f\"{i+1}\", (x+3, y+15), \n",
    "                       cv2.FONT_HERSHEY_SIMPLEX, 0.4, (255, 255, 255), 1)\n",
    "            \n",
    "            # Boyut bilgisi (köşede küçük)\n",
    "            cv2.putText(img_copy, f\"{w}x{h}\", (x+w-40, y+h-3), \n",
    "                       cv2.FONT_HERSHEY_SIMPLEX, 0.3, (200, 200, 200), 1)\n",
    "        \n",
    "        # ADIM 7: Aktif çizim varsa geçici dikdörtgeni göster\n",
    "        if drawing and start_point and end_point:\n",
    "            x1, y1 = start_point\n",
    "            x2, y2 = end_point\n",
    "            \n",
    "            # Geçici dikdörtgen çiz (sarı renk)\n",
    "            cv2.rectangle(img_copy, start_point, end_point, (0, 255, 255), 2)\n",
    "            \n",
    "            # Boyut bilgisi göster\n",
    "            width = abs(x2 - x1)\n",
    "            height = abs(y2 - y1)\n",
    "            mid_x = (x1 + x2) // 2\n",
    "            mid_y = (y1 + y2) // 2\n",
    "            cv2.putText(img_copy, f\"{width}x{height}\", (mid_x-25, mid_y), \n",
    "                       cv2.FONT_HERSHEY_SIMPLEX, 0.6, (0, 255, 255), 2)\n",
    "        \n",
    "        # ADIM 8: Üst bilgi paneli (kompakt)\n",
    "        panel_height = 35\n",
    "        img_width = img_copy.shape[1]\n",
    "        \n",
    "        # Siyah arka plan şeridi\n",
    "        cv2.rectangle(img_copy, (0, 0), (img_width, panel_height), (0, 0, 0), -1)\n",
    "        \n",
    "        # İstatistikler\n",
    "        x_pos = 10\n",
    "        cv2.putText(img_copy, f\"Toplam Park Yeri: {len(parking_spots)}\", (x_pos, 22), \n",
    "                   cv2.FONT_HERSHEY_SIMPLEX, 0.5, (255, 255, 255), 2)\n",
    "        \n",
    "        x_pos += 220\n",
    "        cv2.putText(img_copy, \"| Sol Tik+Surukle: Alan Sec | Sag Tik: Sil | Q: Kaydet | R: Sifirla\", (x_pos, 22), \n",
    "                   cv2.FONT_HERSHEY_SIMPLEX, 0.4, (180, 180, 180), 1)\n",
    "        \n",
    "        # ADIM 9: Görüntüyü göster\n",
    "        cv2.imshow(\"Park Yeri Secimi - Surukle-Birak\", img_copy)\n",
    "        \n",
    "        # ADIM 10: Klavye kontrolleri\n",
    "        key = cv2.waitKey(1) & 0xFF\n",
    "        \n",
    "        # Q - Bitir ve kaydet\n",
    "        if key == ord('q') or key == ord('Q'):\n",
    "            break\n",
    "        \n",
    "        # R - Tümünü sıfırla\n",
    "        elif key == ord('r') or key == ord('R'):\n",
    "            if parking_spots:\n",
    "                parking_spots.clear()\n",
    "                print(\"⚠ Tüm park yerleri silindi!\")\n",
    "    \n",
    "    # ADIM 11: Pencereleri kapat\n",
    "    cv2.destroyAllWindows()\n",
    "    \n",
    "    # ADIM 12: Kaydet\n",
    "    if len(parking_spots) > 0:\n",
    "        with open('parking_spots.pkl', 'wb') as f:\n",
    "            pickle.dump(parking_spots, f)\n",
    "        \n",
    "        print(\"\\n\" + \"=\"*70)\n",
    "        print(\"KAYIT BAŞARILI!\")\n",
    "        print(\"=\"*70)\n",
    "        print(f\"✓ Toplam {len(parking_spots)} park yeri kaydedildi\")\n",
    "        \n",
    "        # Boyut istatistikleri\n",
    "        if parking_spots:\n",
    "            widths = [spot[2] for spot in parking_spots]\n",
    "            heights = [spot[3] for spot in parking_spots]\n",
    "            areas = [spot[2] * spot[3] for spot in parking_spots]\n",
    "            \n",
    "            print(f\"\\nBoyut İstatistikleri:\")\n",
    "            print(f\"  • Genişlik: Min={min(widths)}px, Max={max(widths)}px, Ortalama={sum(widths)//len(widths)}px\")\n",
    "            print(f\"  • Yükseklik: Min={min(heights)}px, Max={max(heights)}px, Ortalama={sum(heights)//len(heights)}px\")\n",
    "            print(f\"  • Alan: Min={min(areas)}px², Max={max(areas)}px², Ortalama={sum(areas)//len(areas)}px²\")\n",
    "        \n",
    "        print(\"=\"*70 + \"\\n\")\n",
    "    else:\n",
    "        print(\"\\n⚠ Hiç park yeri seçilmedi!\\n\")\n",
    "    \n",
    "    return parking_spots\n",
    "\n",
    "\n",
    "# =================================================================================\n",
    "# BÖLÜM 2: DİNAMİK BOYUTLU PARK YERİ DOLULUK TESPİT FONKSİYONU\n",
    "# =================================================================================\n",
    "\n",
    "def check_parking_spot(img_processed, x, y, w, h):\n",
    "    \"\"\"\n",
    "    Tek bir park yerinin dolu/boş durumunu kontrol eder (Dinamik boyut desteği)\n",
    "    \n",
    "    Parametreler:\n",
    "        img_processed: İşlenmiş gri seviye görüntü\n",
    "        x, y: Sol üst köşe koordinatları\n",
    "        w, h: Genişlik ve yükseklik (değişken boyut)\n",
    "        \n",
    "    Dönüş: True=Dolu, False=Boş\n",
    "    \"\"\"\n",
    "    \n",
    "    # ROI (Region of Interest) kes\n",
    "    spot = img_processed[y:y+h, x:x+w]\n",
    "    \n",
    "    if spot.size == 0:\n",
    "        return False\n",
    "    \n",
    "    # YÖNTEM 1: Kenar Yoğunluğu\n",
    "    edges = cv2.Canny(spot, 50, 200)\n",
    "    edge_ratio = cv2.countNonZero(edges) / (spot.shape[0] * spot.shape[1])\n",
    "    \n",
    "    # YÖNTEM 2: Standart Sapma\n",
    "    std_dev = np.std(spot)\n",
    "    \n",
    "    # YÖNTEM 3: Ortalama Parlaklık\n",
    "    mean_val = np.mean(spot)\n",
    "    \n",
    "    # YÖNTEM 4: Alan bazlı adaptif eşikler\n",
    "    # Büyük alanlar için daha katı, küçük alanlar için daha esnek eşikler\n",
    "    area = w * h\n",
    "    \n",
    "    if area < 500:  # Çok küçük alanlar\n",
    "        edge_threshold = 0.10\n",
    "        std_threshold = 15\n",
    "        mean_threshold = 190\n",
    "    elif area < 1500:  # Normal alanlar\n",
    "        edge_threshold = 0.15\n",
    "        std_threshold = 20\n",
    "        mean_threshold = 180\n",
    "    else:  # Büyük alanlar\n",
    "        edge_threshold = 0.18\n",
    "        std_threshold = 25\n",
    "        mean_threshold = 175\n",
    "    \n",
    "    # Karar verme\n",
    "    is_occupied = (edge_ratio > edge_threshold) or (std_dev > std_threshold and mean_val < mean_threshold)\n",
    "    \n",
    "    return is_occupied\n",
    "\n",
    "\n",
    "# =================================================================================\n",
    "# BÖLÜM 3: OTOPARK ANALİZ FONKSİYONU\n",
    "# =================================================================================\n",
    "\n",
    "def analyze_parking(img_path, parking_spots):\n",
    "    \"\"\"\n",
    "    Otopark görüntüsünü analiz eder (Dinamik boyut destekli)\n",
    "    \"\"\"\n",
    "    \n",
    "    img = cv2.imread(img_path)\n",
    "    if img is None:\n",
    "        print(f\"HATA: '{img_path}' dosyası bulunamadı!\")\n",
    "        return None, 0, 0\n",
    "    \n",
    "    # Gri seviye dönüşüm\n",
    "    img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n",
    "    \n",
    "    # CLAHE uygula (Kontrast iyileştirme)\n",
    "    clahe = cv2.createCLAHE(clipLimit=2.0, tileGridSize=(8,8))\n",
    "    img_enhanced = clahe.apply(img_gray)\n",
    "    \n",
    "    # Gaussian Blur (Gürültü azaltma)\n",
    "    img_processed = cv2.GaussianBlur(img_enhanced, (3, 3), 0)\n",
    "    \n",
    "    # Sayaçlar\n",
    "    empty_count = 0\n",
    "    occupied_count = 0\n",
    "    \n",
    "    # Her park yerini kontrol et\n",
    "    for i, (x, y, w, h) in enumerate(parking_spots):\n",
    "        # Doluluk kontrolü\n",
    "        is_occupied = check_parking_spot(img_processed, x, y, w, h)\n",
    "        \n",
    "        # Renk ve metin belirleme\n",
    "        if is_occupied:\n",
    "            color = (0, 0, 255)      # Kırmızı = DOLU\n",
    "            text = \"DOLU\"\n",
    "            occupied_count += 1\n",
    "        else:\n",
    "            color = (0, 255, 0)      # Yeşil = BOŞ\n",
    "            text = \"BOS\"\n",
    "            empty_count += 1\n",
    "        \n",
    "        # Dikdörtgen çiz\n",
    "        cv2.rectangle(img, (x, y), (x + w, y + h), color, 2)\n",
    "        \n",
    "        # Numara\n",
    "        cv2.putText(img, f\"{i+1}\", (x+3, y+15), \n",
    "                   cv2.FONT_HERSHEY_SIMPLEX, 0.4, (255, 255, 255), 1)\n",
    "        \n",
    "        # Durum (DOLU/BOŞ)\n",
    "        cv2.putText(img, text, (x+3, y+h-5), \n",
    "                   cv2.FONT_HERSHEY_SIMPLEX, 0.35, color, 1)\n",
    "    \n",
    "    # Kompakt istatistik paneli (üstte tek satır)\n",
    "    total = len(parking_spots)\n",
    "    img_width = img.shape[1]\n",
    "    panel_height = 35\n",
    "    \n",
    "    # Siyah arka plan şeridi\n",
    "    cv2.rectangle(img, (0, 0), (img_width, panel_height), (0, 0, 0), -1)\n",
    "    \n",
    "    x_pos = 10\n",
    "    cv2.putText(img, \"RAPOR:\", (x_pos, 22), \n",
    "               cv2.FONT_HERSHEY_SIMPLEX, 0.5, (255, 255, 255), 2)\n",
    "    \n",
    "    x_pos += 85\n",
    "    cv2.putText(img, f\"Toplam: {total}\", (x_pos, 22), \n",
    "               cv2.FONT_HERSHEY_SIMPLEX, 0.5, (200, 200, 200), 1)\n",
    "    \n",
    "    x_pos += 110\n",
    "    cv2.putText(img, f\"Bos: {empty_count}\", (x_pos, 22), \n",
    "               cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)\n",
    "    \n",
    "    x_pos += 90\n",
    "    cv2.putText(img, f\"Dolu: {occupied_count}\", (x_pos, 22), \n",
    "               cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 0, 255), 1)\n",
    "    \n",
    "    # Doluluk oranı\n",
    "    doluluk_orani = (occupied_count / total * 100) if total > 0 else 0\n",
    "    x_pos += 110\n",
    "    cv2.putText(img, f\"Doluluk Orani: %{doluluk_orani:.1f}\", (x_pos, 22), \n",
    "               cv2.FONT_HERSHEY_SIMPLEX, 0.5, (255, 255, 0), 1)\n",
    "    \n",
    "    return img, empty_count, occupied_count\n",
    "\n",
    "\n",
    "# =================================================================================\n",
    "# BÖLÜM 4: ANA PROGRAM\n",
    "# =================================================================================\n",
    "\n",
    "if __name__ == \"__main__\":\n",
    "    # Görüntü yolu (KENDİ DOSYA ADINIZI YAZIN)\n",
    "    img_path = \"otopark.jpg\"\n",
    "    \n",
    "    print(\"\\n\" + \"=\"*70)\n",
    "    print(\" \"*15 + \"OTOPARK DOLULUK ANALİZ SİSTEMİ\")\n",
    "    print(\" \"*18 + \"SÜRÜKLE-BIRAK SİSTEMİ\")\n",
    "    print(\"=\"*70)\n",
    "    print(\"\\nÖZELLİKLER:\")\n",
    "    print(\"  ✓ SÜRÜKLE-BIRAK ile park yeri seçimi\")\n",
    "    print(\"  ✓ Her alan için ÖZEL BOYUT belirleme\")\n",
    "    print(\"  ✓ Küçük/büyük tüm park yerlerine uyumlu\")\n",
    "    print(\"  ✓ Adaptif doluluk tespiti\")\n",
    "    print(\"  ✓ Kompakt görsel raporlama\")\n",
    "    print(\"=\"*70 + \"\\n\")\n",
    "    \n",
    "    # ADIM 1: Park yerlerini seç\n",
    "    parking_spots = select_parking_spots(img_path)\n",
    "    \n",
    "    if len(parking_spots) == 0:\n",
    "        print(\"Program sonlandırılıyor...\")\n",
    "        exit()\n",
    "    \n",
    "    # ADIM 2: Analiz yap\n",
    "    print(\"\\n\" + \"=\"*70)\n",
    "    print(\"ANALİZ YAPILIYOR...\")\n",
    "    print(\"=\"*70)\n",
    "    \n",
    "    result_img, empty, occupied = analyze_parking(img_path, parking_spots)\n",
    "    \n",
    "    if result_img is None:\n",
    "        print(\"Analiz başarısız!\")\n",
    "        exit()\n",
    "    \n",
    "    # ADIM 3: Sonuçları göster\n",
    "    cv2.namedWindow(\"Otopark Doluluk Analizi\", cv2.WINDOW_NORMAL)\n",
    "    cv2.imshow(\"Otopark Doluluk Analizi\", result_img)\n",
    "    \n",
    "    # Konsol çıktısı\n",
    "    total = len(parking_spots)\n",
    "    \n",
    "    print(\"\\n\" + \"=\"*70)\n",
    "    print(\"DETAYLI SONUÇLAR\")\n",
    "    print(\"=\"*70)\n",
    "    print(f\"Toplam Park Yeri    : {total}\")\n",
    "    print(f\"Boş Park Yerleri    : {empty} (%{empty/total*100:.1f})\")\n",
    "    print(f\"Dolu Park Yerleri   : {occupied} (%{occupied/total*100:.1f})\")\n",
    "    print(\"-\"*70)\n",
    "    print(f\"Doluluk Oranı       : %{occupied/total*100:.1f}\")\n",
    "    print(\"=\"*70)\n",
    "    print(\"\\n[ESC] veya herhangi bir tuşa basarak pencereyi kapatabilirsiniz...\")\n",
    "    \n",
    "    # Bekleme\n",
    "    cv2.waitKey(0)\n",
    "    cv2.destroyAllWindows()\n",
    "    \n",
    "    print(\"\\nProgram başarıyla tamamlandı!\\n\")\n",
    "\n",
    "\n",
    "# =================================================================================\n",
    "# EK: KAYITLI PARK YERLERİYLE TEKRAR ANALİZ\n",
    "# =================================================================================\n",
    "\"\"\"\n",
    "# Eğer park yerleri daha önce kaydedilmişse, doğrudan yükleyip analiz yapabilirsiniz:\n",
    "\n",
    "import pickle\n",
    "import cv2\n",
    "\n",
    "# Park yerlerini yükle\n",
    "with open('parking_spots.pkl', 'rb') as f:\n",
    "    parking_spots = pickle.load(f)\n",
    "\n",
    "# Analiz yap\n",
    "img_path = \"otopark.jpg\"\n",
    "result_img, empty, occupied = analyze_parking(img_path, parking_spots)\n",
    "\n",
    "# Göster\n",
    "cv2.imshow(\"Analiz\", result_img)\n",
    "cv2.waitKey(0)\n",
    "cv2.destroyAllWindows()\n",
    "\"\"\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "8d922479-8825-4931-85f6-8c6b80ee7ce4",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "23c17fb0-6ff9-4d14-90f8-51955ad616d0",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.7"
  }
 },
 "nbformat": 4,![otopark2](https://github.com/user-attachments/assets/3fbef580-2c9b-4019-b280-03aded95ae06)

 "nbformat_minor": 5![otopark](https://github.com/user-attachments/assets/8168ae77-f714-4cef-aaf2-b3b56f92c8d0)

}
